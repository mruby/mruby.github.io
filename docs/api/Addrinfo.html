<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Addrinfo
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/mruby.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Addrinfo";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/mruby.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (A)</a> &raquo;
    
    
    <span class="title">Addrinfo</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Addrinfo
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Addrinfo</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>mrbgems/mruby-socket/src/socket.c<span class="defines">,<br />
  mrbgems/mruby-socket/mrblib/socket.rb</span>
</dd>
  </dl>
  
</div>





  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#canonname-instance_method" title="#canonname (instance method)">#<strong>canonname</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>def bind.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#protocol-instance_method" title="#protocol (instance method)">#<strong>protocol</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute protocol.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#socktype-instance_method" title="#socktype (instance method)">#<strong>socktype</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute socktype.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#foreach-class_method" title="foreach (class method)">.<strong>foreach</strong>(nodename, service, family = nil, socktype = nil, protocol = nil, flags = 0, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip-class_method" title="ip (class method)">.<strong>ip</strong>(host)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tcp-class_method" title="tcp (class method)">.<strong>tcp</strong>(host, port)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#udp-class_method" title="udp (class method)">.<strong>udp</strong>(host, port)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unix-class_method" title="unix (class method)">.<strong>unix</strong>(path, socktype = Socket::SOCK_STREAM)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_to_array-instance_method" title="#_to_array (instance method)">#<strong>_to_array</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#afamily-instance_method" title="#afamily (instance method)">#<strong>afamily</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getnameinfo-instance_method" title="#getnameinfo (instance method)">#<strong>getnameinfo</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(sockaddr, family = Socket::PF_UNSPEC, socktype = 0, protocol = 0)  &#x21d2; Addrinfo </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Addrinfo.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>def family_addrinfo(host, port=nil) def getnameinfo(flags=0)  Socket.getnameinfo end.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect_sockaddr-instance_method" title="#inspect_sockaddr (instance method)">#<strong>inspect_sockaddr</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip%3F-instance_method" title="#ip? (instance method)">#<strong>ip?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip_address-instance_method" title="#ip_address (instance method)">#<strong>ip_address</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip_port-instance_method" title="#ip_port (instance method)">#<strong>ip_port</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip_unpack-instance_method" title="#ip_unpack (instance method)">#<strong>ip_unpack</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ipv4%3F-instance_method" title="#ipv4? (instance method)">#<strong>ipv4?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ipv6%3F-instance_method" title="#ipv6? (instance method)">#<strong>ipv6?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>def ipv4_loopback? def ipv4_multicast? def ipv4_private?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pfamily-instance_method" title="#pfamily (instance method)">#<strong>pfamily</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>def ipv6_loopback? def ipv6_mc_global? def ipv6_mc_linklocal? def ipv6_mc_nodelocal? def ipv6_mc_orilocal? def ipv6_mc_sitelocal? def ipv6_multicast? def ipv6_to_ipv4 def ipv6_unspecified def ipv6_v4compat? def ipv6_v4mapped? def listen(backlog=5).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_sockaddr-instance_method" title="#to_sockaddr (instance method)">#<strong>to_sockaddr</strong>  &#x21d2; Object </a>
    

    
      (also: #to_s)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unix%3F-instance_method" title="#unix? (instance method)">#<strong>unix?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unix_path-instance_method" title="#unix_path (instance method)">#<strong>unix_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(sockaddr, family = Socket::PF_UNSPEC, socktype = 0, protocol = 0)  &#x21d2; <tt><span class='object_link'><a href="" title="Addrinfo (class)">Addrinfo</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of Addrinfo</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 2</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">initialize</span>(sockaddr, family=<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">PF_UNSPEC</span>, socktype=<span style="color:#00D">0</span>, protocol=<span style="color:#00D">0</span>)
  <span style="color:#33B">@hostname</span> = <span style="color:#069">nil</span>
  <span style="color:#080;font-weight:bold">if</span> sockaddr.is_a? <span style="color:#036;font-weight:bold">Array</span>
    sary = sockaddr
    <span style="color:#080;font-weight:bold">if</span> sary[<span style="color:#00D">0</span>] == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AF_INET</span><span style="color:#710">'</span></span> || sary[<span style="color:#00D">0</span>] == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AF_INET6</span><span style="color:#710">'</span></span>
      <span style="color:#33B">@sockaddr</span> = <span style="color:#036;font-weight:bold">Socket</span>.sockaddr_in(sary[<span style="color:#00D">1</span>], sary[<span style="color:#00D">3</span>])
      <span style="color:#33B">@hostname</span> = sary[<span style="color:#00D">2</span>]
    <span style="color:#080;font-weight:bold">elsif</span> sary[<span style="color:#00D">0</span>] == <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">AF_UNIX</span><span style="color:#710">'</span></span>
      <span style="color:#33B">@sockaddr</span> = <span style="color:#036;font-weight:bold">Socket</span>.sockaddr_un(sary[<span style="color:#00D">1</span>])
    <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">else</span>
    <span style="color:#33B">@sockaddr</span> = sockaddr.dup
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#080;font-weight:bold">if</span> family == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">PF_UNSPEC</span> <span style="color:#080;font-weight:bold">or</span> family == <span style="color:#069">nil</span>
    <span style="color:#33B">@family</span> = <span style="color:#036;font-weight:bold">Socket</span>._sockaddr_family(<span style="color:#33B">@sockaddr</span>)
  <span style="color:#080;font-weight:bold">else</span>
    <span style="color:#33B">@family</span> = family
  <span style="color:#080;font-weight:bold">end</span>
  <span style="color:#33B">@socktype</span> = socktype
  <span style="color:#33B">@protocol</span> = protocol
  <span style="color:#33B">@canonname</span> = <span style="color:#069">nil</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="canonname-instance_method">
  
    #<strong>canonname</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>def bind</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 53</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">canonname</span>
  <span style="color:#33B">@canonname</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="protocol-instance_method">
  
    #<strong>protocol</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute protocol</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 139</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">protocol</span>
  <span style="color:#33B">@protocol</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="socktype-instance_method">
  
    #<strong>socktype</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute socktype</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 140</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">socktype</span>
  <span style="color:#33B">@socktype</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="foreach-class_method">
  
    .<strong>foreach</strong>(nodename, service, family = nil, socktype = nil, protocol = nil, flags = 0, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 25</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">foreach</span>(nodename, service, family=<span style="color:#069">nil</span>, socktype=<span style="color:#069">nil</span>, protocol=<span style="color:#069">nil</span>, flags=<span style="color:#00D">0</span>, &amp;block)
  a = <span style="color:#069">self</span>.getaddrinfo(nodename, service, family, socktype, protocol, flags)
  a.each { |ai| block.call(ai) }
  a
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ip-class_method">
  
    .<strong>ip</strong>(host)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 31</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">ip</span>(host)
  <span style="color:#036;font-weight:bold">Addrinfo</span>.new(<span style="color:#036;font-weight:bold">Socket</span>.sockaddr_in(<span style="color:#00D">0</span>, host))
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tcp-class_method">
  
    .<strong>tcp</strong>(host, port)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 35</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">tcp</span>(host, port)
  <span style="color:#036;font-weight:bold">Addrinfo</span>.getaddrinfo(host, port, <span style="color:#069">nil</span>, <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">SOCK_STREAM</span>, <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">IPPROTO_TCP</span>)[<span style="color:#00D">0</span>]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="udp-class_method">
  
    .<strong>udp</strong>(host, port)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 39</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">udp</span>(host, port)
  <span style="color:#036;font-weight:bold">Addrinfo</span>.getaddrinfo(host, port, <span style="color:#069">nil</span>, <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">SOCK_DGRAM</span>, <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">IPPROTO_UDP</span>)[<span style="color:#00D">0</span>]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unix-class_method">
  
    .<strong>unix</strong>(path, socktype = Socket::SOCK_STREAM)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 43</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#069">self</span>.<span style="color:#06B;font-weight:bold">unix</span>(path, socktype=<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">SOCK_STREAM</span>)
  <span style="color:#036;font-weight:bold">Addrinfo</span>.new(<span style="color:#036;font-weight:bold">Socket</span>.sockaddr_un(path), <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_UNIX</span>, socktype)
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="_to_array-instance_method">
  
    #<strong>_to_array</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146
147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 142</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">_to_array</span>
  <span style="color:#080;font-weight:bold">case</span> <span style="color:#33B">@family</span>
  <span style="color:#080;font-weight:bold">when</span> <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_INET</span>
    s = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AF_INET</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">when</span> <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_INET6</span>
    s = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AF_INET6</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">when</span> <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_UNIX</span>
    s = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">AF_UNIX</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">else</span>
    s = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">(unknown AF)</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
  addr, port = <span style="color:#069">self</span>.getnameinfo(<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">NI_NUMERICHOST</span>|<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">NI_NUMERICSERV</span>)
  [ s, port.to_i, addr, addr ]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="afamily-instance_method">
  
    #<strong>afamily</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 47</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">afamily</span>
  <span style="color:#33B">@family</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getnameinfo-instance_method">
  
    #<strong>getnameinfo</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/src/socket.c', line 191</span>

static mrb_value
mrb_addrinfo_getnameinfo(mrb_state *mrb, mrb_value <span style="color:#069">self</span>)
{
  mrb_int flags;
  mrb_value ary, host, sastr, serv;
  int error;

  flags = <span style="color:#00D">0</span>;
  mrb_get_args(mrb, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">|i</span><span style="color:#710">&quot;</span></span>, &amp;flags);
  host = mrb_str_buf_new(mrb, <span style="color:#036;font-weight:bold">NI_MAXHOST</span>);
  serv = mrb_str_buf_new(mrb, <span style="color:#036;font-weight:bold">NI_MAXSERV</span>);

  sastr = mrb_iv_get(mrb, <span style="color:#069">self</span>, mrb_intern_lit(mrb, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@sockaddr</span><span style="color:#710">&quot;</span></span>));
  <span style="color:#080;font-weight:bold">if</span> (!mrb_string_p(sastr)) {
    mrb_raise(mrb, <span style="color:#036;font-weight:bold">E_SOCKET_ERROR</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">invalid sockaddr</span><span style="color:#710">&quot;</span></span>);
  }
  error = getnameinfo((struct sockaddr *)RSTRING_PTR(sastr), (socklen_t)RSTRING_LEN(sastr), RSTRING_PTR(host), <span style="color:#036;font-weight:bold">NI_MAXHOST</span>, RSTRING_PTR(serv), <span style="color:#036;font-weight:bold">NI_MAXSERV</span>, (int)flags);
  <span style="color:#080;font-weight:bold">if</span> (error) {
    mrb_raisef(mrb, <span style="color:#036;font-weight:bold">E_SOCKET_ERROR</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">getnameinfo: %s</span><span style="color:#710">&quot;</span></span>, gai_strerror(error));
  }
  ary = mrb_ary_new_capa(mrb, <span style="color:#00D">2</span>);
  mrb_str_resize(mrb, host, strlen(RSTRING_PTR(host)));
  mrb_ary_push(mrb, ary, host);
  mrb_str_resize(mrb, serv, strlen(RSTRING_PTR(serv)));
  mrb_ary_push(mrb, ary, serv);
  <span style="color:#080;font-weight:bold">return</span> ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>def family_addrinfo(host, port=nil)
def getnameinfo(flags=0)
 Socket.getnameinfo
end</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 64</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">inspect</span>
  <span style="color:#080;font-weight:bold">if</span> ipv4? <span style="color:#080;font-weight:bold">or</span> ipv6?
    <span style="color:#080;font-weight:bold">if</span> <span style="color:#33B">@protocol</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">IPPROTO_TCP</span> <span style="color:#080;font-weight:bold">or</span> (<span style="color:#33B">@socktype</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">SOCK_STREAM</span> <span style="color:#080;font-weight:bold">and</span> <span style="color:#33B">@protocol</span> == <span style="color:#00D">0</span>)
      proto = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">TCP</span><span style="color:#710">'</span></span>
    <span style="color:#080;font-weight:bold">elsif</span> <span style="color:#33B">@protocol</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">IPPROTO_UDP</span> <span style="color:#080;font-weight:bold">or</span> (<span style="color:#33B">@socktype</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">SOCK_DGRAM</span> <span style="color:#080;font-weight:bold">and</span> <span style="color:#33B">@protocol</span> == <span style="color:#00D">0</span>)
      proto = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">UDP</span><span style="color:#710">'</span></span>
    <span style="color:#080;font-weight:bold">else</span>
      proto = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">???</span><span style="color:#710">'</span></span>
    <span style="color:#080;font-weight:bold">end</span>
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;Addrinfo: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>inspect_sockaddr<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>proto<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">else</span>
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">#&lt;Addrinfo: </span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span><span style="color:#069">self</span>.unix_path<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20"> SOCK_STREAM&gt;</span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect_sockaddr-instance_method">
  
    #<strong>inspect_sockaddr</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87
88
89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 79</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">inspect_sockaddr</span>
  <span style="color:#080;font-weight:bold">if</span> ipv4?
    a, p = ip_unpack
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>a<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>p<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">elsif</span> ipv6?
    a, p = ip_unpack
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">[</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>a<span style="font-weight:bold;color:#666">}</span></span><span style="color:#D20">]:</span><span style="background-color:hsla(0,0%,0%,0.07);color:black"><span style="font-weight:bold;color:#666">#{</span>p<span style="font-weight:bold;color:#666">}</span></span><span style="color:#710">&quot;</span></span>
  <span style="color:#080;font-weight:bold">elsif</span> unix?
    unix_path
  <span style="color:#080;font-weight:bold">else</span>
    <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">???</span><span style="color:#710">'</span></span>
  <span style="color:#080;font-weight:bold">end</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ip?-instance_method">
  
    #<strong>ip?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 93</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ip?</span>
  ipv4? <span style="color:#080;font-weight:bold">or</span> ipv6?
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ip_address-instance_method">
  
    #<strong>ip_address</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 97</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ip_address</span>
  ip_unpack[<span style="color:#00D">0</span>]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ip_port-instance_method">
  
    #<strong>ip_port</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 101</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ip_port</span>
  ip_unpack[<span style="color:#00D">1</span>]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ip_unpack-instance_method">
  
    #<strong>ip_unpack</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 105</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ip_unpack</span>
  h, p = getnameinfo(<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">NI_NUMERICHOST</span>|<span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">NI_NUMERICSERV</span>)
  [ h, p.to_i ]
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ipv4?-instance_method">
  
    #<strong>ipv4?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 110</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ipv4?</span>
  <span style="color:#33B">@family</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_INET</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ipv6?-instance_method">
  
    #<strong>ipv6?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>def ipv4_loopback?
def ipv4_multicast?
def ipv4_private?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 118</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">ipv6?</span>
  <span style="color:#33B">@family</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_INET6</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pfamily-instance_method">
  
    #<strong>pfamily</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>def ipv6_loopback?
def ipv6_mc_global?
def ipv6_mc_linklocal?
def ipv6_mc_nodelocal?
def ipv6_mc_orilocal?
def ipv6_mc_sitelocal?
def ipv6_multicast?
def ipv6_to_ipv4
def ipv6_unspecified
def ipv6_v4compat?
def ipv6_v4mapped?
def listen(backlog=5)</p>


  </div>
</div>
<div class="tags">
  

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 135</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">pfamily</span>
  <span style="color:#33B">@family</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_sockaddr-instance_method">
  
    #<strong>to_sockaddr</strong>  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='to_s-instance_method'>to_s</span></span>
    </span>
  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 157</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">to_sockaddr</span>
  <span style="color:#33B">@sockaddr</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unix?-instance_method">
  
    #<strong>unix?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>

<table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/mrblib/socket.rb', line 163</span>

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">unix?</span>
  <span style="color:#33B">@family</span> == <span style="color:#036;font-weight:bold">Socket</span>::<span style="color:#036;font-weight:bold">AF_UNIX</span>
<span style="color:#080;font-weight:bold">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unix_path-instance_method">
  
    #<strong>unix_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222
223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'mrbgems/mruby-socket/src/socket.c', line 220</span>

static mrb_value
mrb_addrinfo_unix_path(mrb_state *mrb, mrb_value <span style="color:#069">self</span>)
{
  mrb_value sastr;

  sastr = mrb_iv_get(mrb, <span style="color:#069">self</span>, mrb_intern_lit(mrb, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">@sockaddr</span><span style="color:#710">&quot;</span></span>));
  <span style="color:#080;font-weight:bold">if</span> (((struct sockaddr *)RSTRING_PTR(sastr))-&gt;sa_family != <span style="color:#036;font-weight:bold">AF_UNIX</span>)
    mrb_raise(mrb, <span style="color:#036;font-weight:bold">E_SOCKET_ERROR</span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">need AF_UNIX address</span><span style="color:#710">&quot;</span></span>);
  <span style="color:#080;font-weight:bold">if</span> (RSTRING_LEN(sastr) &lt; (mrb_int)offsetof(struct sockaddr_un, sun_path) + <span style="color:#00D">1</span>) {
    <span style="color:#080;font-weight:bold">return</span> mrb_str_new(mrb, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#710">&quot;</span></span>, <span style="color:#00D">0</span>);
  } <span style="color:#080;font-weight:bold">else</span> {
    <span style="color:#080;font-weight:bold">return</span> mrb_str_new_cstr(mrb, ((struct sockaddr_un *)RSTRING_PTR(sastr))-&gt;sun_path);
  }
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Nov 27 22:35:11 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.20 in <a href="https://github.com/sagmor/yard-mruby">mruby mode</a> 0.3.0 (ruby-2.5.5).
</div>

    </div>
  </body>
</html>